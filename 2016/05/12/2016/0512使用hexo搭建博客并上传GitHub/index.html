<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>使用hexo搭建博客并上传GitHub | Palance's Blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用hexo搭建博客并上传GitHub</h1><a id="logo" href="/blog/.">Palance's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/blog/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用hexo搭建博客并上传GitHub</h1><div class="post-meta">May 12, 2016<span> | </span><span class="category"><a href="/blog/categories/环境、配置/">环境、配置</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/" href="/blog/2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>之前在博客园、简书、CSDN等地儿都开过博，一篇文章写好了，我希望能在几个平台可以同步发布，可是操作起来成本不低。几个平台下的富文本编辑器比较起来还是博客园更顺手，看着更舒服，尤其是代码块的操作灵活、准确。而CSDN对代码块内的文字加粗、修改字色后就会出现html文无法解析的情况，混杂着代码和html文本实在太难看了，后来我知道原来是Markdown的代码块规则限制。而且CSDN刚刚才取消了提交文章要审核通过才能发布的限制，审核没有完成之前，连自己都看不到，且不能修改，这让我一度放弃CSDN平台。如果是写普通的文章写作体验最好的是简书，大气、简洁。但简书更适合一般的写作，比较技术化的中间掺杂大量代码的支持还不够好。<br>作为一名程序员，应该到GitHub上开博，这里是程序员的圣城。花了两天时间研究了一下，发现还蛮简单的，而且md格式也被博客园、简书、CSDN所支持，写完一份应该比较容易复制到这三个平台。我喜欢在本地编辑markdown文件，使用sublime 及其插件Markdown Editing 和 OmniMarkupPreviewer。完成后底稿、资源文件都悉数保存到GitHub，日后查找、修改都很容易。<br>我用hexo作为静态页面生成器，操作过程遇到不少问题，搞定之后留一份操作记录吧。</p>
<h1 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h1><ul>
<li>安装node.js，去官网下载安装即可，我安装的是最新稳定版。</li>
<li><p>安装Hexo<br><code>sudo npm install -g hexo</code></p>
</li>
<li><p>创建hexo目录并初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir hexo</span><br><span class="line">$ cd hexo</span><br><span class="line">$ hexo init</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后就可以生成网站，启动服务了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
</li>
<li><p>hexo文件夹<br>先来看一下hexo文件夹下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo/</span><br><span class="line">  |- node_modules/  # hexo需要的模块，不需要上传GitHub</span><br><span class="line">  |- themes/        # 主题文件，需要上传GitHub的dev分支</span><br><span class="line">  |- sources/       # 博文md文件，需要上传GitHub的dev分支</span><br><span class="line">  |- public/        # 生成的静态页面，由hexo deploy自动上传到gh-page分支</span><br><span class="line">  |- package.json   # 记录hexo需要的包信息，不需要上传GitHub</span><br><span class="line">  |- _config.yml    # 全局配置文件，需要上传GitHub的dev分支</span><br><span class="line">  |- .gitignore     # hexo生成默认的.gitignore，它已经配置好了不需要上传的hexo文件</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="关联GitHub"><a href="#关联GitHub" class="headerlink" title="关联GitHub"></a>关联GitHub</h1><p>首次先创建GitHub工程blog，并且使用“Launch automatic page generator”生成页面，它会给该工程创建分支gh-pages。<br>手动为之创建dev分支，未来工程源码会放到dev分支下；hexo生成的网站静态页面会放到gh-pages分支。</p>
<ul>
<li>首次创建GitHub工程后操作dev分支代码</li>
</ul>
<p>如果是刚创建的GitHub工程，clone dev分支的代码到本地blog-dev/，然后把前面hexo/文件夹下的内容全部拷贝到blog-dev/，注意包括一个隐藏文件.gitignore。</p>
<ul>
<li>已存在GitHub工程的恢复<br>仍是clone dev分支的代码到本地blog-dev/，然后把<code>hexo/node_modules/</code>拷贝到<code>blog-dev/</code><br>再试试生成页面、启动服务，确保是正常的：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>网上有介绍把package.json文件同步到GitHub，以后每次恢复时执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo</span><br><span class="line">$ npm install</span><br><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<p>可是我在不同的机器上试总是出错。只好采取笨办法，每次先<code>hexo init</code>出一个完整文件夹，再把相关文件拷贝到GitHub目录下。千万不要先clone 了blog目录，再在该目录下执行<code>hexo init</code>，因为init会把.git信息删掉。</p>
<h1 id="配置自己的-config-yml"><a href="#配置自己的-config-yml" class="headerlink" title="配置自己的_config.yml"></a>配置自己的_config.yml</h1><p>按照如下内容修改blog-dev/_config.yml：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: Palance&apos;s Blog   # 标题</span><br><span class="line">subtitle:</span><br><span class="line">description:</span><br><span class="line">author: Palance Li</span><br><span class="line">language: zh-CN         # 语言设置</span><br><span class="line">url: http://palanceli.github.io/blog</span><br><span class="line">root: /blog/</span><br></pre></td></tr></table></figure></p>
<p>翻到最下面，改成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/&lt;自己的github账号&gt;/blog.git</span><br><span class="line">  branch: gh-pages</span><br></pre></td></tr></table></figure></p>
<h1 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h1><p>这里有大量的主题<code>https://github.com/hexojs/hexo/wiki/Themes</code><br>我非常喜欢Maupassant：<a href="https://www.haomwei.com/technology/maupassant-hexo.html，" target="_blank" rel="external">https://www.haomwei.com/technology/maupassant-hexo.html，</a><br>简洁清晰，而且适配手机、PC各个平台。</p>
<ul>
<li>安装方法<br>首次在blog-dev/目录下执行如下命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line">$ npm install hexo-renderer-jade --save</span><br><span class="line">$ npm install hexo-renderer-sass --save</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>以后建议把blog-dev/themes/maupassant/.git文件夹删掉，把maupassant文件夹随自己的blog-dev上传到GitHub。<br>以后clone blog-dev后，执行完前面的安装操作步骤后记得执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-renderer-jade --save</span><br><span class="line">$ npm install hexo-renderer-sass --save</span><br></pre></td></tr></table></figure></p>
<ul>
<li>配置<br>在blog-dev/themes/maupassant/_config.yml中根据自己的情况修改，比如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">links:</span><br><span class="line">  - title: 我的博客园</span><br><span class="line">    url: http://www.cnblogs.com/palance/</span><br><span class="line">  - title: 我的CSDN</span><br><span class="line">    url: http://blog.csdn.net/zchongr</span><br><span class="line">  - title: 我的简书</span><br><span class="line">    url: http://www.jianshu.com/users/5e527164a8c2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在blog-dev/_config.yml中修改:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: maupassant</span><br></pre></td></tr></table></figure></p>
<p>第一次的工作就完成了，可以提交github到blog-dev了。</p>
<h1 id="上传生成页面"><a href="#上传生成页面" class="headerlink" title="上传生成页面"></a>上传生成页面</h1><p>执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd blog-dev</span><br><span class="line">$ npm install hexo-deployer-git</span><br></pre></td></tr></table></figure></p>
<p>以后每次执行完<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></p>
<p>生成了静态页面后就可以执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure></p>
<p>完成页面上传。</p>
<h1 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h1><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p>首先确认_config.yml中有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure></p>
<p>然后在blog-dev/下执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure></p>
<p>确保在blog-dev/source/_posts下创建和md文件同名的目录，在里面放该md需要的图片，然后在md中插入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](目录名/文件名.png)</span><br></pre></td></tr></table></figure></p>
<p>即可在hexo generate时正确生成插入图片。比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_posts</span><br><span class="line">    |- post1.md</span><br><span class="line">    |_ post1</span><br><span class="line">        |- pic1.png</span><br></pre></td></tr></table></figure></p>
<p>在md文件中插入图片时只需写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](post1/pic1.png)</span><br></pre></td></tr></table></figure></p>
<p>即可。首次配置完了需要执行一次清除操作，再生成页面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></p>
<p>如果没做清除，直接生成页面，在我这里会出现路径错误的情况。</p>
<h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><p>插入优酷视频很简单，在优酷点击视频下面的“分享”按钮，复制<code>通用代码</code>，直接粘贴到md文件中即可。</p>
<h2 id="文章目录"><a href="#文章目录" class="headerlink" title="文章目录"></a>文章目录</h2><p>参考<a href="https://www.haomwei.com/technology/maupassant-hexo.html" target="_blank" rel="external">Maupassant作者对该主题的使用说明</a>，只需要在文章的<code>front-matter</code>（即最头部写title、categories的部分）部分加入<code>toc: true</code>即可</p>
<h2 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h2><p>首先应该去<a href="http://disqus.com注册账号，并在设置中选择“Add" target="_blank" rel="external">http://disqus.com注册账号，并在设置中选择“Add</a> DisqusTo Site”，然后填写自己的blog url以及shortname，注册成功后，才能在自己的主题配置文件中（themes/maupassant/_config.yml）填写disqus short name。我用的主题默认是开启评论功能的，如果要关掉，可以在<code>front-matter</code>中加入<code>comments: false</code></p>
<h2 id="隐藏文件"><a href="#隐藏文件" class="headerlink" title="隐藏文件"></a>隐藏文件</h2><p>可以将文件生成到草稿目录下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new draft <span class="string">"new draft"</span></span><br></pre></td></tr></table></figure></p>
<p>或者直接在source/_drafts下新建md文件。如果希望在本地<code>hexo s</code>时文件可见，要么在md文件的<code>front-matter</code>中加入<code>render_drafts: true</code>，要么在启动server的时候使用<code>hexo server --drafts</code></p>
</div><script type="text/javascript" src="/blog/js/share.js?v=0.0.0" async></script><a data-url="http://palanceli.github.io/blog/2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/" data-id="cioh7tcu3000drlziqrqeeh2w" class="article-share-link">分享到</a><div class="tags"><a href="/blog/tags/hexo/">hexo</a></div><div class="post-nav"><a href="/blog/2016/05/14/2016/0514BinderLearning8/" class="pre">Binder学习笔记（八）—— 客户端如何组织Test()请求 ？ </a><a href="/blog/2016/05/12/2016/0514BinderLearning7/" class="next">Binder学习笔记（七）—— ServiceManager如何响应addService请求 ？ </a></div><div id="disqus_thread"><script>var disqus_shortname = 'palance';
var disqus_identifier = '2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/';
var disqus_title = '使用hexo搭建博客并上传GitHub';
var disqus_url = 'http://palanceli.github.io/2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//palance.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://palanceli.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/环境、配置/">环境、配置</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/音乐/" style="font-size: 15px;">音乐</a> <a href="/blog/tags/binder/" style="font-size: 15px;">binder</a> <a href="/blog/tags/hexo/" style="font-size: 15px;">hexo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/21/2016/0521小雨点参加钢琴比赛/">小雨点第一次参加钢琴比赛</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/15/2016/0514BinderLearning9/">Binder学习笔记（九）—— 服务端如何响应Test()请求 ？ </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/14/2016/0514BinderLearning8/">Binder学习笔记（八）—— 客户端如何组织Test()请求 ？ </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/12/2016/0512使用hexo搭建博客并上传GitHub/">使用hexo搭建博客并上传GitHub</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/12/2016/0514BinderLearning7/">Binder学习笔记（七）—— ServiceManager如何响应addService请求 ？ </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/11/2016/0514BinderLearning6/">Binder学习笔记（六）—— binder服务端是如何组织addService数据的？ </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/10/2016/0514BinderLearning5/">Binder学习笔记（五）—— Parcel是怎么打包的？ </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/09/2016/0514BinderLearning4/">Binder学习笔记（四）—— ServiceManager如何响应checkService请求 </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/08/2016/0514BinderLearning3/">Binder学习笔记（三）—— binder客户端是如何组织checkService数据的 ？</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/05/07/2016/0514BinderLearning2/">Binder学习笔记（二）—— defaultServiceManager()返回了什么？</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//palance.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/palanceli" title="我的GitHub" target="_blank">我的GitHub</a><ul></ul><a href="http://www.cnblogs.com/palance/" title="我的博客园" target="_blank">我的博客园</a><ul></ul><a href="http://blog.csdn.net/zchongr" title="我的CSDN" target="_blank">我的CSDN</a><ul></ul><a href="http://www.jianshu.com/users/5e527164a8c2" title="我的简书" target="_blank">我的简书</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/blog/." rel="nofollow">Palance's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/blog/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/blog/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=0.0.0"></script></div></body></html>