---
layout: post
title: 关于股指基金定投的一点研究（二）
date: 2018-07-09 14:00:00 +0800
categories: 金融
tags: 随笔
toc: true
comments: true
---

上一篇几轮实验考察了沪深300各种定投策略的收益率。我发现从yahoo可以很方便地抓取美股历史数据，比如[纳斯达克100](https://finance.yahoo.com/quote/QQQ/history?period1=1026057600&period2=1530979200&interval=1d&filter=history&frequency=1d)和[标普500](https://finance.yahoo.com/quote/SPY/history?period1=725817600&period2=1531065600&interval=1d&filter=history&frequency=1d)，反正实验策略的代码是不变的，只需要把这些数据抓取下来，适配一个解析器就能很快算出这些指数投资收益率了，本文就把实验结果跑出来。代码还是在[finance-learning/main.py](https://github.com/palanceli/finance-learning/blob/master/main.py)。

<!-- more -->
为了便于清晰地对比，我把上文中沪深300的数据也列出来了。

# 每月定投，至2018/07的复合收益率

yahoo只提供了标普500最早至1993年的数据，以后我还会想办法得到更早的，因为能看到多久远的历史，才能领略到多大的风险。下表表示从起点开始，如果每个月坚持定投，到今天年复合收益率。这个数据的沪深300与上一篇文章的数字不一致，原因是本文多算了一个月。

起点　　　　　沪深300　　　标普500　　　纳斯达克100  
—————————————————————————————————  
1993-07　　　　　　　　　　4.91%  
1994-01　　　　　　　　　　4.96%  
1995-01　　　　　　　　　　4.81%  
1996-01　　　　　　　　　　4.70%  
1997-01　　　　　　　　　　4.65%  
1998-01　　　　　　　　　　4.70%  
1999-01　　　　　　　　　　4.83%　　　　6.95%  
2000-01　　　　　　　　　　5.04%　　　　7.36%  
2001-01　　　　　　　　　　5.31%　　　　7.94%  
2002-01　　　3.28%　　　　5.54%　　　　8.35%  
2003-01　　　3.25%　　　　5.67%　　　　8.54%  
2004-01　　　3.11%　　　　5.75%　　　　8.69%    
2005-01　　　2.84%　　　　5.94%　　　　9.00%  
2006-01　　　1.99%　　　　6.19%　　　　9.35%  
2007-01　　　1.26%　　　　6.54%　　　　9.74%  
2008-01　　　1.52%　　　　7.07%　　　　10.32%  
2009-01　　　1.67%　　　　7.45%　　　　10.68%  
2010-01　　　1.77%　　　　7.14%　　　　10.28%  
2011-01　　　2.08%　　　　6.99%　　　　10.20%  
2012-01　　　2.43%　　　　6.84%　　　　10.22%  
2013-01　　　2.15%　　　　6.49%　　　　10.20%  
2014-01　　　1.43%　　　　6.30%　　　　10.01%  
2015-01　　　-1.40%　　　　6.68%　　　　10.66%  
2016-01　　　-1.11%　　　　7.40%　　　　12.30%  
2017-01　　　-5.51%　　　　6.21%　　　　11.87%  
这个结果还是挺震惊的，不是说A股不比美股收益率低么？为什么近15年的投资回报率相差这么远呢？

# 3年复合收益率

下表表示从起点开始，每个月坚持定投，3年后的年复合收益率：

起点　　　　　沪深300　　　标普500　　　纳斯达克100  
—————————————————————————————————  
1993-07	　　　	　　　	　　　　	8.92%	  	
1994-01	　　　	　　　	　　　　	13.34%	  	
1995-01	　　　	　　　	　　　　	15.23%		
1996-01	　　　	　　　	　　　　	13.02%	  	
1997-01	　　　	　　　	　　　　	10.95%	  	
1998-01	　　　	　　　	　　　　	2.29%		
1999-01	　　　	　　　	　　　　	-4.19%	　　　　-12.08%  
2000-01	　　　	　　　	　　　　	-6.88%	　　　	-13.18%  
2001-01	　　　	　　　	　　　　	1.81%	　　　　3.69%  
2002-01	　　　	-4.39%	　　　	6.10%	　　　　	8.81%  
2003-01	　　　	-6.76%	 　　 　6.12%	　　　　	7.39%  
2004-01	　　　	16.55%	　　　　5.87%	　　　　	4.66%  
2005-01	　　　	51.35%	　　　　	4.70%	　　　　7.01%  
2006-01	　　　	-3.69%	　　　　-14.05%	　　　	-14.32%  
2007-01	　　　	5.95%	　　　　	-0.53%	　　　　2.80%  
2008-01	　　　	2.87%	　　　　	4.98%	　　　　9.72%  
2009-01	　　　	-3.87%	　　　　5.79%	　　　　	8.96%  
2010-01	　　　	-8.72%	　　　　	5.23%	　　　　6.57%  
2011-01	　　　	-2.10%	　　　　	9.77%	　　　　10.77%  
2012-01	　　　	5.76%	　　　　	9.67%	　　　　12.44%  
2013-01	　　　	9.79%	　　　　	5.53%	　　　　9.58%  
2014-01	　　　	6.19%	　　　　	3.87%	　　　　4.31%  
2015-01	　　　	4.23%	　　　　	7.71%	　　　　10.10%  
相比之下标普要稳健得多，纳斯达克高收益，但遇到灾年风险也挺大的。不过这两个指数还是比沪深更靠谱。

# 5年复合收益率

和3年类似的算法：  

起点　　　　　沪深300　　　标普500　　　纳斯达克100  
—————————————————————————————————  
1993-07	　　　	　　　	　　　　12.33%	  	
1994-01	　　　	　　　	　　　　13.61%	  	
1995-01	　　　	　　　	　　　　12.83%		
1996-01	　　　	　　　	　　　　6.70%	  	
1997-01	　　　	　　　	　　　　0.53%  
1998-01	　　　	　　　	　　　　-3.91%  
1999-01	　　　	　　　	　　　　-0.74%	　　　　-2.48%  
2000-01	　　　	　　　	　　　　2.00%	　　　　1.02%  
2001-01	　　　	　　　	　　　　3.94%	　　　　4.46%  
2002-01	　　　	8.61%	　　　　5.82%	　　　　5.43%  
2003-01	　　　	29.88%	　　 　5.39%	　　　　6.56%  
2004-01	　　　	4.75%	　　　　-7.33%	　　　　-7.67%  
2005-01	　　　	15.56%	　　　　-0.50%	　　　　2.02%  
2006-01	　　　	5.97%	　　　　1.43%	　　　　5.21%  
2007-01	　　　	-2.94%	　　 　2.20%	　　　　5.40%  
2008-01	　　　	-5.39%	　　 　5.08%	　　　　7.52%  
2009-01	　　　	-2.12%	　　 　9.38%	　　　　11.21%  
2010-01	　　　	1.64%	　 　 　8.97%	　　　　11.32%  
2011-01	　　　	5.97%	　 　 　6.90%	　　　　9.76%  
2012-01	　　　	5.49%	　 　 　5.58%	　　　　6.76%  
2013-01	　　　	6.22%	　 　 　6.99%	　　　　9.68%  
放长到5年以后，风险和收益中和了

# 10年复合收益率

起点　　　　　沪深300　　　标普500　　　纳斯达克100  
—————————————————————————————————  
1993-07	　　　	　　　	　　　　2.62%  
1994-01	　　　	　　　	　　　　3.46%  
1995-01	　　　	　　　	　　　　3.32%  
1996-01	　　　	　　　	　　　　2.84%  
1997-01	　　　	　　　	　　　　3.08%  
1998-01	　　　	　　　	　　　　3.06%  
1999-01	　　　	　　　	　　　　-2.90%	　　　　-3.88%  
2000-01	　　　	　　　	　　　　0.56%	　　　　1.39%  
2001-01	　　　	　　　	　　　　1.66%	　　　　3.80%  
2002-01	　　　	4.54%	　　　　1.96%	　　　　4.29%  
2003-01	　　　	1.80%	　　　　2.92%	　　　　5.05%  
2004-01	　　　	2.40%	　　　　4.93%	　　　　6.99%  
2005-01	　　　	3.11%	　　　　5.85%	　　　　8.43%  
2006-01	　　　	3.67%	　　　　5.65%	　　　　8.56%  
2007-01	　　　	2.24%	　　　　5.71%	　　　　7.70%  
2008-01	　　　	3.38%	　　　　7.32%	　　　　9.98%  
总的来看，确实持续定投的时间越长，收益率越稳健，而且风险越小，尤其是最近10年，无论标普还是纳斯达克，是牛市的十年。
但是，即便是以十年为窗口，也还是存在亏钱的可能性，只是A股还看不到那么长的历史数据，02年之前的数据不看也罢。需要其他的方法来平衡。

不过这两篇文章的算法我觉得还不是很严谨：我是把所有资金投入作为计算N年的复合收益，而实际上这些钱并不是在N年前一次性投入，而是逐步积分涨起来的，所以我的算法结果会偏低。但如果细想，即使10年前有100块，打算全部投入股指基金，为了分摊风险，也必须积分式的投入，否则风险就涨起来了。因此这么算貌似又是合理的。这个问题我没有想清楚。